<project name="Oxfam" default="dist" basedir=".">
	<!-- set global properties for this build -->
	<property name="build" location="../build" />
	<property name="classes" location="${build}/classes" />
	<property name="dist" location="${build}/dist" />
	<property name="src" location="../src" />
	<property name="resources" location="${src}/etc/resources" />
	<property name="db" location="${resources}/OxfamDB.mdb" />
	<property name="jar-dir" location="c:/java/libraries" />
	<property name="version" value="1.4" />
	
	<fileset id="jars" dir="${jar-dir}">
		<include name="*.jar" />
	</fileset>

	<path id="oxfamPath">
		<fileset refid="jars" />
	</path>
	
	<pathconvert property="classpath" refid="oxfamPath" pathsep=" " dirsep="/">
    	<map from="${jar-dir}" to="lib" />
	</pathconvert>

	<target name="compile" depends="clean" description="Compile the source.">
		<!-- Compile the java code from ${src} into ${classes} -->
		<javac srcdir="${src}" classpathref="oxfamPath" destdir="${classes}" />
	</target>
	
	<target name="dist" depends="compile" description="Generate the jar.">
		<!-- Put everything in ${build} into the MyProject-${version}.jar file -->
		<jar jarfile="${dist}/Oxfam-${version}.jar" basedir="${classes}">
			<manifest>
				<attribute name="Created-By" value="Flamez" />
				<attribute name="Class-Path" value="${classpath}" />
				<attribute name="Main-Class" value="be.sefl.oxfam.main.Oxfam" />
				<attribute name="Application-version" value="${version}" />
			</manifest>
		</jar>
		<copy file="${db}" todir="${dist}" />
		<copydir src="${jar-dir}" dest="${dist}\lib" />
	</target>
	
	<target name="clean" description="Clean up">
		<!-- Delete the ${build} and ${dist} directory trees -->
		<delete dir="${classes}"/>
		<delete dir="${dist}"/>
		<mkdir dir="${classes}" />
		<mkdir dir="${dist}"/>
	</target>
</project>